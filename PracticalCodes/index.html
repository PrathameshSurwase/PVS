import java.util.*;

public class pizza {

    static class Graph {
        int V;
        int[][] adjMatrix;

        Graph(int V) {
            this.V = V;
            adjMatrix = new int[V][V];
            for (int i = 0; i < V; i++)
                Arrays.fill(adjMatrix[i], Integer.MAX_VALUE);
        }

        void addEdge(int u, int v, int time) {
            adjMatrix[u][v] = time;
            adjMatrix[v][u] = time; // undirected
        }
    }

    static class TSP {
        int minTime = Integer.MAX_VALUE;
        List<Integer> bestRoute = new ArrayList<>();

        void tspUtil(Graph g, int current, boolean[] visited, List<Integer> route, int timeSoFar, int start) {
            if (route.size() == g.V) {
                if (g.adjMatrix[current][start] != Integer.MAX_VALUE) {
                    int totalTime = timeSoFar + g.adjMatrix[current][start];
                    if (totalTime < minTime) {
                        minTime = totalTime;
                        bestRoute = new ArrayList<>(route);
                        bestRoute.add(start); // return to start
                    }
                }
                return;
            }

            for (int i = 0; i < g.V; i++) {
                if (!visited[i] && g.adjMatrix[current][i] != Integer.MAX_VALUE) {
                    visited[i] = true;
                    route.add(i);
                    tspUtil(g, i, visited, route, timeSoFar + g.adjMatrix[current][i], start);
                    visited[i] = false;
                    route.remove(route.size() - 1);
                }
            }
        }

        void findOptimalRoute(Graph g, int start) {
            boolean[] visited = new boolean[g.V];
            visited[start] = true;
            List<Integer> route = new ArrayList<>();
            route.add(start);
            tspUtil(g, start, visited, route, 0, start);

            System.out.print("Optimal delivery route: ");
            for (int loc : bestRoute)
                System.out.print(loc + " -> ");
            System.out.println("END");
            System.out.println("Minimum delivery time: " + minTime + " minutes");
        }
    }

    public static void main(String[] args) {
        Graph g = new Graph(5);
        g.addEdge(0, 1, 10);
        g.addEdge(0, 2, 15);
        g.addEdge(0, 3, 20);
        g.addEdge(1, 2, 35);
        g.addEdge(1, 3, 25);
        g.addEdge(2, 3, 30);
        g.addEdge(1, 4, 30);
        g.addEdge(3, 4, 15);

        int startLocation = 0;
        TSP tspSolver = new TSP();
        tspSolver.findOptimalRoute(g, startLocation);
    }
}
